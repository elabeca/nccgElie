<div ng-controller="MainCtrl as main">
  <script type="text/ng-template" id="/arrow.html">
    <span ng-show="column == '{{field}}' && direction == '-'">&#9650;</span>
    <span ng-show="column == '{{field}}' && direction == ''">&#9660;</span>
    {{title}}
  </script>
  <form name="customerEntryForm" ng-submit="customerEntryForm.$valid && main.addCustomer()" novalidate>
    <div class="form-group">
      <label for="input_name">Name</label>
      <input type="text" class="form-control" id="input_name" ng-model="main.customer.name" placeholder="Enter name" required>
    </div>

    <div class="form-group">
      <label for="input_email">Email address</label>
      <input type="email" class="form-control" id="input_email" ng-model="main.customer.email" placeholder="Enter email" required>
    </div>

    <div class="form-group">
      <label for="input_dob">Date of birth</label>
      <input type="date" class="form-control" id="input_dob" ng-model="main.customer.dob" placeholder="Enter date of birth" required>
    </div>

    <div class="btn-group">
      <label>Number of children</label><br/>
      <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
        {{main.customer.numOfChildren}} <span class="caret"></span>
      </button>
      <ul class="dropdown-menu" role="menu">
        <li ng-repeat="i in [0,1,2,3,4,5,6,7,8,9,10,11,12]"><a ng-click="main.setNumOfChildren(main.customer, i)">{{i}}</a></li>
      </ul>
    </div>

    <br/><br/>

    <div class="form-group">
      <button type="submit" class="btn btn-default btn-primary">Add</button>
    </div>
  </form>
  <br/>

  <div class="row">
    <div class="col-lg-6">
      <div class="input-group">
        <label for="search">Search</label>
        <input id="search" aria-label="Search" type="text" class="form-control" placeholder="by name or email..." ng-model="main.searchValue">
      </div><!-- /input-group -->
    </div><!-- /.col-lg-6 -->
  </div><!-- /.row -->
  <br/>

  <table class="table table-bordered">
    <thead>
      <tr>
        <th class="text-center">Select</th>
        <th class="text-center" ng-click="main.setOrderBy('name')"><arrow title="Name" field="name" column="main.orderByColumn" direction="main.orderByDirection"></arrow></th>
        <th class="text-center" ng-click="main.setOrderBy('email')"><arrow title="Email" field="email" column="main.orderByColumn" direction="main.orderByDirection"></arrow></th>
        <th class="text-center" ng-click="main.setOrderBy('dob')"><arrow title="DOB" field="dob" column="main.orderByColumn" direction="main.orderByDirection"></arrow></th>
        <th class="text-center" ng-click="main.setOrderBy('numOfChildren')"><arrow title="Children" field="numOfChildren" column="main.orderByColumn" direction="main.orderByDirection"></arrow></th>
        <th class="text-center">Edit</th>
      </tr>
    </thead>
    <tbody>
      <tr ng-repeat="c in main.customers | orderBy: main.orderByDirection + main.orderByColumn | filter: main.searchValue">
        <th class="text-center"><input ng-show="!c.isEditing" type="checkbox" aria-label="Select" ng-model="c.isSelected"></th>
        <td ng-show="!c.isEditing">{{c.name}}</td>
        <td ng-show="c.isEditing"><input type="text" class="form-control" id="grid_name" ng-model="c.name" placeholder="Enter name"></td>
        <td ng-show="!c.isEditing">{{c.email}}</td>
        <td ng-show="c.isEditing"><input type="email" class="form-control" id="grid_email" ng-model="c.email" placeholder="Enter email"></td>
        <td ng-show="!c.isEditing" class="text-center">{{c.dob | date}}</td>
        <td ng-show="c.isEditing"><input type="date" class="form-control" id="grid_dob" ng-model="c.dob" placeholder="Enter date of birth"></td>
        <td ng-show="!c.isEditing" class="text-center">{{c.numOfChildren}}</td>
        <td ng-show="c.isEditing">
          <div class="btn-group">
            <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
              {{c.numOfChildren}} <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" role="menu">
              <li ng-repeat="i in [0,1,2,3,4,5,6,7,8,9,10,11,12]"><a ng-click="main.setNumOfChildren(c, i)">{{i}}</a></li>
            </ul>
          </div>
        </td>
        <td ng-show="!c.isEditing" class="text-center">
          <button type="submit" class="btn btn-default btn-success" ng-click="main.setEditMode(c, true)">Edit</button>
        </td>
        <td ng-show="c.isEditing" class="text-center">
          <button type="submit" class="btn btn-default btn-primary" ng-click="main.setEditMode(c, false)">Update</button>
        </td>
      </tr>
    </tbody>
  </table>
  <button class="pull-right btn btn-default btn-danger" ng-show="main.customers.length" ng-click="main.deleteCustomers()">Delete selected</button>
  <br/><br/>
</div>
